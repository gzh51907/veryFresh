<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>测试接口html</title>
</head>

<body>
    <button id="btn">发送购物车请求</button>
    <br>
    <br>
    <button id="btn2">请求goods数据</button>
    <br>
    <br>
    <button id="btn3">请求商品详情</button>
    <br>
    <br>
    <button id="btn4">管理员登录</button>
    <br>
    <br>
    <button id="btn5">请求分区数据</button>
    <br>
    <br>
    <button id="btn6">查看用户列表</button>
    <br>
    <br>
    <button id="btn7">管理员删除用户</button>
    <br>
    <br>
    <button id="btn8">分页查询数据</button>
    <br>
    <br>
    <button id="btn9">删除购物车数据</button>
    <br>
    <br>
    <button id="btn10">分页的购物车</button>
    <br>
    <br>
    <button id="btn11">加入购物车</button>
</body>

</html>
<script>
    let btn = document.getElementById("btn");
    // let obj = { name: "lh" }
    // 购物车测试
    btn.onclick = () => {
        // obj.sex = '男';
        // console.log(obj)
        let params = `token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjoibGgiLCJpYXQiOjE1NzEyMTg1NTYsImV4cCI6MTU3MTgyMzM1Nn0.Xi1dD_MohuQRaku4xBnUZV4K4viMTw2v98L6e7XUsjA`;
        console.log("已发送请求")
        let xhr = new XMLHttpRequest();
        xhr.open("get", `http://10.3.133.72:10086/cart/queryAll?${params}`, true);
        xhr.send();
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }

    //请求全部商品
    btn2.onclick = () => {
        let xhr = new XMLHttpRequest();
        xhr.open("get", "http://10.3.133.72:10086/goods/queryAll", true);
        xhr.send();
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }
    // 查看商品详情
    btn3.onclick = () => {
        let xhr = new XMLHttpRequest();
        let productId = `productId=ea79296f-3649-4a4d-8473-c8c798622208`
        xhr.open("get", `http://10.3.133.72:10086/goods/queryByPid?${productId}`, true);
        xhr.send();
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }

    // 管理员登录
    btn4.onclick = () => {
        let xhr = new XMLHttpRequest();
        // let productId = `productId=ea79296f-3649-4a4d-8473-c8c798622208`
        xhr.open("post", "http://10.3.133.72:10086/admin/login", true);
        //post 要设置请求头
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
        xhr.send(`username=admin&password=1233`);
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }

    // 请求分区数据
    btn5.onclick = () => {
        let xhr = new XMLHttpRequest();
        // let productId = `productId=ea79296f-3649-4a4d-8473-c8c798622208`
        xhr.open("get", "http://10.3.133.72:10086/goods/queryArea?pagesNum=5", true);
        xhr.send();
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }

    // 查看用户列表
    btn6.onclick = () => {
        let xhr = new XMLHttpRequest();
        // let productId = `productId=ea79296f-3649-4a4d-8473-c8c798622208`
        xhr.open("get", "http://10.3.133.72:10086/admin/userList", true);
        xhr.send();
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }

    // 删除用户
    btn7.onclick = () => {
        let xhr = new XMLHttpRequest();
        let userId = `put79tdf-h476-bsye-12ddsl5umoag`
        xhr.open("get", `http://10.3.133.72:10086/admin/delUser?userId=${userId}`, true);
        xhr.send();
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }

    // 具有分页的查找查询数据
    btn8.onclick = () => {
        let xhr = new XMLHttpRequest();
        let pages = 2;
        let number = 10;
        xhr.open("get", `http://10.3.133.72:10086/goods/getNumGoods?pages=${pages}&number=${number}`, true);
        xhr.send();
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }

    // 删除购物车数据
    btn9.onclick = () => {
        let xhr = new XMLHttpRequest();
        let { rm, username } = {
            rm:
                `{"shopId":["4ca32455-bda2-4c75-befb-4955c5cbff54"],"productId":["b657b905-67f3-48da-93b4-94658610f948","49a1806e-955a-4928-b54c-423cbf635d50","ea79296f-3649-4a4d-8473-c8c798622208"]}`,
            username:
                'lh'
        };
        // console.log(rm)
        // console.log(Authorization)
        xhr.open("get", `http://10.3.133.72:10086/cart/removeGood?rm=${rm}&username=${username}`, true);
        xhr.send();
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }

    // 分页查看购物车表
    btn10.onclick = () => {
        let xhr = new XMLHttpRequest();
        let pages = 1;
        let number = 5;
        // console.log(rm)
        // console.log(Authorization)
        xhr.open("get", `http://10.3.133.72:10086/cart/cartList?pages=${pages}&number=${number}`, true);
        xhr.send();
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }

    // 用户加入购物车
    btn11.onclick = () => {
        let xhr = new XMLHttpRequest();
        // username,shopId,productId,num
        let username = "lh";
        let shopId = "4ca32455-bda2-4c75-befb-4955c5cbff54";
        let productId = "573476f2-d86a-438d-9904-38f9a40c8fb7";
        let num = 5;

        xhr.open("post", `http://10.3.133.72:10086/cart/AddToCart`, true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.send(`username=${username}&shopId=${shopId}&productId=${productId}&num=${num}`);
        xhr.onload = () => {
            let res = JSON.parse(xhr.responseText);
            console.log(res);
        }
    }

</script>